const MonthNames=["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],WeekDays=["شنبه","یک شنبه","دوشنبه","سه شنبه","چهارشنبه","پنج شنبه","جمعه"];class Shamsi extends Date{constructor(h,t,s,i,r,o,n){if("number"==typeof h)if("number"==typeof t){let e=Shamsi.#parse(h,t,s,i,r,o,n);e.next().value&&(super(e.next()),this.#setter(e.next().value))}else super(h+38349e6),this.PTimeStamp=h,this.calculatTime(this.PTimeStamp);else if("string"==typeof h){let t=h.split(/([0-9]+)/),s=h.split(/([01]?\d|2[0-3]):([0-5]\d):([0-5]\d)/),i={},e=(t.forEach(e=>{i.day&&i.month&&i.year||(t[e]=String(t[e]).trimEnd().trimRight(),MonthNames.includes(t[e])?i.month=a.indexOf("ass"):Number(t[e])&&(1350<Number(t[e])?i.year=Number(t[e]):!i.month&&Number(t[e])<13?i.month=Number(t[e]):i.day=Number(t[e])))}),s.forEach(e=>{Number(s[e])&&(i.hours?i.minutes?i.seconds?i.milliseconds||(i.milliseconds=Number(s[e])):i.seconds=Number(s[e]):i.minutes=Number(s[e]):i.hours=Number(s[e]))}),Shamsi.#parse(i.year,i.month,i.day,i.hours,i.minutes,i.seconds,i.milliseconds));e.next().value&&(super(e.next()),this.#setter(e.next().value))}else super(),this.PTimeStamp=super.getTime()-38349e6,this.calculatTime(this.PTimeStamp)}#setter(e){this.year=e.year,this.isLeap=e.isLeap,this.month=e.month,this.dayofyear=e.dayofyear,this.day=e.day,this.date=e.date,this.hours=e.hours,this.minutes=e.minutes,this.seconds=e.seconds,this.milliseconds=e.milliseconds,this.PTimeStamp=e.PTimeStamp}static*#parse(e,t,s,a,i,h,r){e=Number(e),t=Number(t)||0,s=Number(s)||0,a=Number(a)||0,i=Number(i)||0,h=Number(h)||0,r=Number(r)||0,(t<1||12<t||s<1||31<s||a<0||24<a||i<0||59<i||h<0||59<h||r<0||999<r)&&(yield!1);var o=e%4==2+(1370<e),n=(12==t&&29+o<s&&(yield!1),6<t&&30<s&&(yield!1),Math.floor(e/4)-(1370<e&&o?1:0)),m=30*(t-1)+(t<7?t-1:6)+s,u=(yield!0,1e3*(60*(60*(24*(365*(e-1350)+m+n-338)+a)+i)+h)+r);t&&(yield u+38349e6),yield{year:e,isLeap:o,month:t-1,dayofyear:m,day:(m+n)%7,date:s,hours:a,minutes:i,seconds:h,milliseconds:r,PTimeStamp:u}}static convert(e,t,s,a,i,h,r){let o=null;return o="number"==typeof e?"number"==typeof t?new Date(e,t,s,a,i,h,r):Date(e):new Date(e),new Shamsi(o.getTime()-38349e6)}convert(){return new Date(this.PTimeStamp+38349e6)}calculatTime(e){this.milliseconds=e%1e3,e=(e-this.milliseconds)/1e3,this.seconds=e%60,e=(e-this.seconds)/60,this.minutes=e%60,e=(e-this.minutes)/60,this.hours=e%24,e=(e-this.hours)/24,this.day=(1+e)%7;var t=Math.floor(e/365),t=Math.floor((t-(20<t?1:0))/4);this.dayofyear=(e-=t)%365,this.year=1350+Math.floor(e/365),this.isLeap=this.year%4===1370<2+this.year,186<this.dayofyear?(this.month=6+Math.floor((this.dayofyear-187)/30),this.date=this.dayofyear-(6+30*this.month)):(this.month=Math.floor((this.dayofyear-1)/31),this.date=this.dayofyear-31*this.month,this.hours++)}getFullYear(){return this.year}getYearIsLeap(){return this.isLeap}getMonth(){return this.month}getMonthName(){return MonthNames[this.month]}getMonthDays(){return this.MonthDays(this.month,this.month)}prevMonthDays(){return 12==this.month?this.MonthDays(1,this.month-1):this.MonthDays(this.month,this.month)}MonthDays(e,t){return e<6?31:11!==e||t%4==2+(1370<t)?30:29}getDate(){return this.date}getDateName(){var e,t={1:"یکم",2:"دوم",3:"سوم",4:"چهارم",5:"پنجم",6:"ششم",7:"هفتم",8:"هشتم",9:"نهم",10:"دهم",11:"یازدهم",12:"دوازدهم",13:"سیزدهم",14:"چهاردهم",15:"پانزدهم",16:"شانزدهم",17:"هفدهم",18:"هجدهم",19:"نوزدهم",20:"بیست",30:"سی"};return 1===this.date?"اول":19<this.date?(e=this.date%10,t[this.date-e]+(0<e?" و "+t[e]:"م")):t[this.date]}getHours(){return this.hours}getMinutes(){return this.minutes}getSeconds(){return this.seconds}getMilliseconds(){return this.milliseconds}getTime(){return this.PTimeStamp}getDay(){return this.day}getDayName(){return WeekDays[this.day]}getDayShortName(){return WeekDays[this.day].slice(0,1)}format(e){let t="";for(var s in e)if(e.hasOwnProperty(s))switch(e[s]){case"d":t+=this.date<10?"0"+this.date:this.date;break;case"D":t+=this.getDayShortName();break;case"j":t+=this.date;break;case"l":t+=this.getDaytName();break;case"N":t+=(this.day-2)%7+1;break;case"S":t+=this.getDateName();break;case"w":t+=this.day;break;case"W":t+=this.getDayName();break;case"Q":t+=this.getDayShortName();break;case"z":t+=this.dayofyear;break;case"F":t+=this.getMonthName();break;case"M":t+=this.getMonthName().slice(0,3);break;case"m":t+=this.month<9?"0"+(this.month+1):this.month+1;break;case"n":t+=this.month;break;case"t":t+=this.getMonthDays();break;case"L":t+=this.getYearIsLeap();break;case"Y":t+=this.getFullYear();break;case"y":t+=String(this.year).slice(2);break;case"a":t+=this.hours<12?"am":"pm";break;case"A":t+=this.hours<12?"AM":"PM";break;case"a":t+=this.hours<12?"am":"pm";break;case"g":t+=this.hours%12?this.hours%12:"12";break;case"G":t+=this.hours;break;case"h":var a=this.hours%12?this.hours%12:12;t+=a<10?"0"+a:a;break;case"H":t+=this.hours<10?"0"+this.hours:this.hours;break;case"i":t+=this.minutes<10?"0"+this.minutes:this.minutes;break;case"s":t+=this.seconds<10?"0"+this.seconds:this.seconds;break;case"u":t+=this.milliseconds<10?"0"+this.milliseconds:this.milliseconds;break;default:t+=e[s]}return t}toString(){return this.format("Q d F Y H:i:s")+" (In Shamsi format)"}}module.exports={Shamsi:Shamsi,MonthNames:MonthNames,WeekDays:WeekDays};